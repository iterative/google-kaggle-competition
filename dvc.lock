schema: '2.0'
stages:
  unzip_dataset:
    cmd: python src/stages/unzip_dataset.py --params=params.yaml
    deps:
    - path: data/archive.zip
      md5: 28eaead3ef745dcbf58ddee356f9f72a
      size: 293174706
    - path: src/stages/unzip_dataset.py
      md5: 8069ad82cacfc20314b1f49f8fe3c305
      size: 599
    params:
      params.yaml:
        unzip_dataset:
          archive_baseline: archive.zip
          data_root: data
          dataset_baseline: images_128
    outs:
    - path: data/images_128
      md5: 2d35f1eb05bc40c5bb7ec7e7d12cc44f.dir
      size: 294272494
      nfiles: 9347
  unzip_dataset@Dishes:
    cmd: python src/stages/unzip_dataset.py --teacher Dishes
    deps:
    - path: data/teacher_data/Dishes.zip
      md5: 9df78eee5fa02415ebf3d46b45a73c50
      size: 227445027
    - path: src/stages/unzip_dataset.py
      md5: 4769d26ff7a1910c16fc15a6ef7ebd39
      size: 1011
    outs:
    - path: data/teacher_data/Dishes
      md5: b23cf150b12c80be59b94ca9a48ebc24.dir
      size: 227858517
      nfiles: 9000
  split_dataset:
    cmd: python src/stages/split_dataset.py --params=params.yaml
    deps:
    - path: data/teacher_data
      md5: 66e9d5eb0583773c3eba72de9662295e.dir
      size: 865939146
      nfiles: 22
    - path: src/stages/split_dataset.py
      md5: 1a66358f99566e5aaea25113f522f5d9
      size: 2114
    params:
      params.yaml:
        data:
          archive_baseline: archive.zip
          data_root: data
          dataset_baseline: images_128
          teacher_data: teacher_data
        split_dataset:
          index_search:
            output_folder: index_search_splitted
            index_search_ratio: 0.3
            seed: 1337
          teacher_models:
            output_folder: teacher_splitted
            seed: 1337
            test_ratio: 0.3
    outs:
    - path: data/index_search_splitted
      md5: 68716079e18cbe2389c7f04a6bb843b3.dir
      size: 68241849
      nfiles: 2700
    - path: data/teacher_splitted
      md5: bf382f58e31b76b7effe32b2e11d843d.dir
      size: 159616668
      nfiles: 6300
  train_teacher_model@Dishes:
    cmd: python src/stages/train.py --teacher Dishes
    deps:
    - path: data/teacher_splitted/Dishes
      md5: 093f82c5da9bc9c4112630ac61c3b24d.dir
      size: 159616668
      nfiles: 6300
    - path: src/stages/train.py
      md5: 000317f81b9599f9fe43a362fef0442d
      size: 2504
    outs:
    - path: dvclive_Dishes.json
      md5: df5698878a36512a72423077c83d2391
      size: 128
    - path: dvclive_Dishes/scalars
      md5: 82331e432a8bda2cd83bd78563146c49.dir
      size: 473
      nfiles: 3
